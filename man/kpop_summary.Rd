% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/se_functions.R
\name{kpop_summary}
\alias{kpop_summary}
\title{Summarise outcomes from a kpop-weighted analysis}
\usage{
kpop_summary(
  kpop_object,
  data,
  outcomes,
  cat_outcomes = NULL,
  sample_size = NULL,
  seed = NULL,
  use_1se_lambda = TRUE
)
}
\arguments{
\item{kpop_object}{Object returned by \code{\link{kpop}}.}

\item{data}{Sample-only data frame passed to \code{kpop()} as
\code{sample_data}. \code{nrow(data)} must equal the number of sample
units (\code{kpop_object$w[1:nrow(data)]} are the sample weights).}

\item{outcomes}{Character vector of column names in \code{data} to
summarise.}

\item{cat_outcomes}{Optional character vector of column names to treat as
categorical regardless of the auto-detection rule.}

\item{sample_size}{Optional override passed to
\code{\link{calc_linearized_var}}.}

\item{seed}{Integer seed passed to \code{set.seed} before glmnet CV calls.
\code{NULL} (default) leaves the RNG state unchanged.}

\item{use_1se_lambda}{Logical passed to \code{\link{calc_linearized_var}}.
Default \code{TRUE}.}
}
\value{
A list of class \code{"kpop_summary"} with components:
  \item{estimates}{Data frame with columns \code{outcome}, \code{level},
    \code{n}, \code{unweighted}, \code{kpop_weighted}, \code{linearized_SE},
    \code{fixed_SE}. Continuous outcomes have \code{level = NA}.}
  \item{diagnostics}{Single-row data frame with \code{n_sample}, \code{ESS},
    \code{ESS_pct}, \code{biasbound_orig}, \code{biasbound_opt},
    \code{biasbound_ratio}, \code{numdims}.}
}
\description{
For each outcome variable supplied, computes the unweighted
  mean (or proportion), kpop-weighted mean (or proportion), linearized SE,
  and fixed-weight SE. Continuous variables produce one row; categorical
  variables produce one row per level. Weight-quality diagnostics (ESS,
  bias bound) from the kpop object are also returned.

  A variable is treated as categorical if it is a factor or character, or
  if it is numeric with 10 or fewer unique non-missing values, or if its
  name is listed in \code{cat_outcomes}.

  Internally calls \code{glmnet::cv.glmnet} for the linearized SE.
  Pass \code{seed} for reproducible cross-validation.
}
\examples{
\donttest{
data("lalonde")
set.seed(1)
sample_rows <- lalonde$nsw == 0
pop_rows    <- lalonde$nsw == 1
xvars <- c("age", "black", "educ", "hisp", "married", "re74", "re75")
out <- kpop(sample_data     = lalonde[sample_rows, xvars],
            population_data = lalonde[pop_rows,    xvars],
            mixed_data      = FALSE,
            minnumdims      = 1,
            maxnumdims      = 10)
kpop_summary(out,
             data     = lalonde[sample_rows, ],
             outcomes = c("re78", "black"),
             seed     = 2)
}

}
\seealso{
\code{\link{calc_linearized_var}}, \code{\link{calc_ses_cat_var}}
}
